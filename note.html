<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è˜¿åµéšè®°ç°¿ - è˜¿åµçš„ä¸ªäººåšå®¢</title>
    <!-- å¼•å…¥Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥Font Awesomeå›¾æ ‡åº“ -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- å¼•å…¥Markdownè§£æåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- é…ç½®Tailwindè‡ªå®šä¹‰é¢œè‰²å’Œå­—ä½“ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6dae8d',
                        secondary: '#7ba6b9',
                        accent: '#d9b99b',
                        light: '#f5f5f0',
                        dark: '#4a5559',
                        // é˜…è¯»æ¨¡å¼é¢œè‰²
                        day: {
                            bg: '#ffffff',
                            text: '#333333'
                        },
                        eye: {
                            bg: '#eaf5e9',
                            text: '#2d4829'
                        },
                        night: {
                            bg: '#2c3e50',
                            text: '#ecf0f1'
                        }
                    },
                    fontFamily: {
                        cute: ['"Comic Sans MS"', '"Marker Felt"', 'sans-serif'],
                        reading: ['"Noto Serif SC"', 'serif']
                    }
                }
            }
        }
    </script>
    
    <!-- è‡ªå®šä¹‰å·¥å…·ç±» -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            }
            .chapter-transition {
                transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            }
        }
    </style>
    
    <style>
        /* åŸºç¡€æ ·å¼ */
        body {
            transition: background-color 0.3s ease;
        }
        
        /* ç« èŠ‚ä¾§è¾¹æ åŠ¨ç”» */
        .chapter-sidebar {
            transition: transform 0.4s ease-in-out;
            transform: translateX(100%);
        }
        
        .chapter-sidebar.active {
            transform: translateX(0);
        }
        
        /* é˜…è¯»åŒºåŸŸæ ·å¼ */
        .reading-content {
            transition: all 0.3s ease;
        }
        
        /* æŒ‰é’®åŠ¨ç”» */
        .control-btn {
            transition: all 0.2s ease;
        }
        
        .control-btn:hover {
            transform: scale(1.1);
        }
        
        /* å›¾ç‰‡æ ·å¼ */
        .reading-content img {
            max-width: 100%;
            height: auto;
            border-radius: 0.5rem;
            margin: 1rem auto;
            display: block;
        }
        
        /* ç¬”è®°ç‰¹æ®Šæ ·å¼ */
        .note-card {
            background-color: rgba(217, 185, 155, 0.1);
            border-left: 4px solid #d9b99b;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }
        
        /* ç« èŠ‚åˆ—è¡¨é¡¹åŠ¨ç”» */
        .chapter-item {
            transition: all 0.2s ease;
        }
        
        .chapter-item:hover {
            background-color: rgba(123, 166, 185, 0.1);
        }
        
        .chapter-item.active {
            background-color: rgba(123, 166, 185, 0.2);
            font-weight: bold;
        }
    </style>
</head>

<body class="font-reading bg-day-bg text-day-text">
    <!-- å·¦ä¾§å¯¼èˆªè¾¹æ  -->
    <div class="fixed top-0 left-0 h-full w-64 bg-white shadow-lg z-40 transform transition-transform duration-300 md:translate-x-0 -translate-x-full" id="main-sidebar">
        <div class="p-5 border-b">
            <h2 class="text-xl font-bold text-secondary">å¯¼èˆªèœå•</h2>
        </div>
        
        <div class="p-4">
            <a href="index.html" class="flex items-center p-3 rounded-xl hover:bg-gray-100 mb-2 transition-all">
                <i class="fa fa-home w-8 text-center"></i>
                <span>é¦–é¡µ</span>
            </a>
            
            <a href="passage.html" class="flex items-center p-3 rounded-xl hover:bg-gray-100 mb-2 transition-all">
                <i class="fa fa-book w-8 text-center"></i>
                <span>èŒ—æ²å¤§é™†è®°äº‹ç°¿</span>
            </a>
            
            <a href="note.html" class="flex items-center p-3 rounded-xl bg-secondary bg-opacity-20 text-secondary mb-2 transition-all">
                <i class="fa fa-sticky-note w-8 text-center"></i>
                <span><strong>è˜¿åµéšè®°ç°¿</strong></span>
            </a>
            
            <a href="music.html" class="flex items-center p-3 rounded-xl hover:bg-gray-100 mb-2 transition-all">
                <i class="fa fa-headphones w-8 text-center"></i>
                <span>çŒ«ä¹‹éƒ½éŸ³ä¹é¦†</span>
            </a>
            
            <a href="photos.html" class="flex items-center p-3 rounded-xl hover:bg-gray-100 transition-all">
                <i class="fa fa-camera w-8 text-center"></i>
                <span>è˜¿åµæ‘„å½±é›†</span>
            </a>
        </div>
    </div>
    
    <!-- ä¸»å†…å®¹åŒº -->
    <div class="min-h-screen transition-all duration-300 md:ml-64" id="main-content">
        <!-- é¡¶éƒ¨å·¥å…·æ  -->
        <header class="sticky top-0 bg-white bg-opacity-90 backdrop-blur-sm shadow-sm z-30 p-4 flex justify-between items-center">
            <div class="flex items-center">
                <button id="sidebar-toggle" class="mr-4 p-2 rounded-full hover:bg-gray-100 control-btn">
                    <i class="fa fa-bars text-secondary"></i>
                </button>
                <h1 class="text-xl md:text-2xl font-bold text-secondary">è˜¿åµéšè®°ç°¿</h1>
            </div>
            
            <div class="flex items-center space-x-2">
                <!-- å­—ä½“å¤§å°è°ƒèŠ‚ -->
                <div class="flex items-center bg-gray-100 rounded-full p-1">
                    <button id="font-smaller" class="p-2 rounded-full hover:bg-white control-btn">
                        <i class="fa fa-text-height text-sm text-dark"></i>
                    </button>
                    <button id="font-larger" class="p-2 rounded-full hover:bg-white control-btn">
                        <i class="fa fa-text-height text-lg text-dark"></i>
                    </button>
                </div>
                
                <!-- ä¸»é¢˜åˆ‡æ¢ -->
                <div class="flex items-center bg-gray-100 rounded-full p-1">
                    <button id="theme-day" class="p-2 rounded-full hover:bg-white control-btn" title="æ—¥é—´æ¨¡å¼">
                        <i class="fa fa-sun-o text-yellow-500"></i>
                    </button>
                    <button id="theme-eye" class="p-2 rounded-full hover:bg-white control-btn" title="æŠ¤çœ¼æ¨¡å¼">
                        <i class="fa fa-leaf text-green-600"></i>
                    </button>
                    <button id="theme-night" class="p-2 rounded-full hover:bg-white control-btn" title="å¤œé—´æ¨¡å¼">
                        <i class="fa fa-moon-o text-blue-800"></i>
                    </button>
                </div>
            </div>
        </header>
        
        <!-- é˜…è¯»åŒºåŸŸ -->
        <div class="max-w-4xl mx-auto p-4 md:p-8 py-8">
            <!-- ç« èŠ‚æ§åˆ¶ -->
            <div class="mb-8 flex justify-between items-center">
                <button id="prev-chapter" class="flex items-center space-x-2 bg-secondary bg-opacity-10 hover:bg-opacity-20 text-secondary px-4 py-2 rounded-full control-btn disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fa fa-arrow-left"></i>
                    <span>ä¸Šä¸€ç¯‡</span>
                </button>
                
                <button id="chapter-toggle" class="bg-primary bg-opacity-10 hover:bg-opacity-20 text-primary px-4 py-2 rounded-full control-btn">
                    <i class="fa fa-list-ul mr-2"></i>
                    <span>ç¬”è®°åˆ—è¡¨</span>
                </button>
                
                <button id="next-chapter" class="flex items-center space-x-2 bg-secondary bg-opacity-10 hover:bg-opacity-20 text-secondary px-4 py-2 rounded-full control-btn disabled:opacity-50 disabled:cursor-not-allowed">
                    <span>ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-arrow-right"></i>
                </button>
            </div>
            
            <!-- æ–‡ç« æ ‡é¢˜ -->
            <div class="text-center mb-10">
                <h2 id="chapter-title" class="text-2xl md:text-3xl font-bold mb-2 text-secondary text-shadow"></h2>
                <div class="text-sm text-gray-500 mb-4" id="note-date">2023å¹´9æœˆ1æ—¥</div>
                <div class="w-24 h-1 bg-secondary bg-opacity-50 mx-auto rounded-full"></div>
            </div>
            
            <!-- é˜…è¯»å†…å®¹åŒº -->
            <div id="reading-area" class="reading-content leading-relaxed text-lg mb-16 min-h-[50vh]">
                <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                <div class="flex justify-center items-center h-64">
                    <div class="text-center">
                        <i class="fa fa-sticky-note text-5xl text-secondary opacity-30 mb-4"></i>
                        <p class="text-gray-500">ç‚¹å‡»ç¬”è®°åˆ—è¡¨é€‰æ‹©è¦é˜…è¯»çš„ç¬”è®°</p>
                    </div>
                </div>
            </div>
            
            <!-- åº•éƒ¨ç« èŠ‚æ§åˆ¶ -->
            <div class="mt-8 flex justify-between items-center">
                <button id="prev-chapter-bottom" class="flex items-center space-x-2 bg-secondary bg-opacity-10 hover:bg-opacity-20 text-secondary px-4 py-2 rounded-full control-btn disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fa fa-arrow-left"></i>
                    <span>ä¸Šä¸€ç¯‡</span>
                </button>
                
                <button id="chapter-toggle-bottom" class="bg-primary bg-opacity-10 hover:bg-opacity-20 text-primary px-4 py-2 rounded-full control-btn">
                    <i class="fa fa-list-ul mr-2"></i>
                    <span>ç¬”è®°åˆ—è¡¨</span>
                </button>
                
                <button id="next-chapter-bottom" class="flex items-center space-x-2 bg-secondary bg-opacity-10 hover:bg-opacity-20 text-secondary px-4 py-2 rounded-full control-btn disabled:opacity-50 disabled:cursor-not-allowed">
                    <span>ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- ç« èŠ‚ä¾§è¾¹æ  -->
    <div class="chapter-sidebar fixed top-0 right-0 h-full w-80 bg-white shadow-xl z-50 overflow-y-auto">
        <div class="p-5 border-b flex justify-between items-center">
            <h3 class="text-xl font-bold text-secondary">ç¬”è®°åˆ—è¡¨</h3>
            <button id="close-chapter" class="p-2 rounded-full hover:bg-gray-100 control-btn">
                <i class="fa fa-times text-dark"></i>
            </button>
        </div>
        
        <div class="p-4">
            <!-- ç« èŠ‚æ’åºæ§åˆ¶ -->
            <div class="flex items-center justify-between mb-4 p-2 bg-gray-100 rounded-lg">
                <span class="text-sm">æ’åºæ–¹å¼:</span>
                <div class="flex items-center space-x-2">
                    <button id="order-asc" class="p-1 rounded hover:bg-white text-sm control-btn active">
                        <i class="fa fa-sort-amount-asc text-secondary"></i>
                        <span>æ­£åº</span>
                    </button>
                    <button id="order-desc" class="p-1 rounded hover:bg-white text-sm control-btn">
                        <i class="fa fa-sort-amount-desc text-dark"></i>
                        <span>é€†åº</span>
                    </button>
                </div>
            </div>
            
            <!-- ç« èŠ‚åˆ—è¡¨ -->
            <div id="chapter-list" class="space-y-1">
                <!-- ç« èŠ‚å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                <div class="flex justify-center p-8">
                    <i class="fa fa-spinner fa-spin text-secondary"></i>
                    <span class="ml-2">åŠ è½½ç¬”è®°ä¸­...</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ç‚¹å‡»é®ç½©å±‚ - ç”¨äºåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç‚¹å‡»ç©ºç™½å¤„å…³é—­ä¾§è¾¹æ  -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden md:hidden"></div>

    <script>
        // å…¨å±€å˜é‡
        let notes = [];              // ç¬”è®°åˆ—è¡¨
        let currentNoteIndex = 0;    // å½“å‰ç¬”è®°ç´¢å¼•
        let sortOrder = 'asc';       // æ’åºæ–¹å¼ï¼šascæ­£åºï¼Œdescé€†åº
        let fontSize = 100;          // å­—ä½“å¤§å°ç™¾åˆ†æ¯”
        
        // DOMå…ƒç´ 
        const mainSidebar = document.getElementById('main-sidebar');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const overlay = document.getElementById('overlay');
        const chapterSidebar = document.querySelector('.chapter-sidebar');
        const chapterToggle = document.getElementById('chapter-toggle');
        const chapterToggleBottom = document.getElementById('chapter-toggle-bottom');
        const closeChapter = document.getElementById('close-chapter');
        const chapterList = document.getElementById('chapter-list');
        const chapterTitle = document.getElementById('chapter-title');
        const noteDate = document.getElementById('note-date');
        const readingArea = document.getElementById('reading-area');
        const prevChapter = document.getElementById('prev-chapter');
        const nextChapter = document.getElementById('next-chapter');
        const prevChapterBottom = document.getElementById('prev-chapter-bottom');
        const nextChapterBottom = document.getElementById('next-chapter-bottom');
        const orderAsc = document.getElementById('order-asc');
        const orderDesc = document.getElementById('order-desc');
        const fontSmaller = document.getElementById('font-smaller');
        const fontLarger = document.getElementById('font-larger');
        const themeDay = document.getElementById('theme-day');
        const themeEye = document.getElementById('theme-eye');
        const themeNight = document.getElementById('theme-night');
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // åŠ è½½ç¬”è®°åˆ—è¡¨
            loadNotes();
            
            // ç»‘å®šäº‹ä»¶ç›‘å¬
            bindEvents();
            
            // æ£€æŸ¥æœ¬åœ°å­˜å‚¨çš„è®¾ç½®
            loadSettings();
        });
        
        // åŠ è½½ç¬”è®°åˆ—è¡¨
        function loadNotes() {
            // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥é€šè¿‡AJAXè¯·æ±‚æœåŠ¡å™¨è·å–static/noteç›®å½•ä¸‹çš„.mdæ–‡ä»¶åˆ—è¡¨
            // è¿™é‡Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
            notes = [
                { id: 1, title: "é­”æ³•å­¦é™¢çš„ç¬¬ä¸€å¤©", date: "2023å¹´9æœˆ1æ—¥", file: "note1.md" },
                { id: 2, title: "è®¤è¯†äº†æ–°çš„æœ‹å‹", date: "2023å¹´9æœˆ5æ—¥", file: "note2.md" },
                { id: 3, title: "ç¬¬ä¸€æ¬¡æˆåŠŸæ–½å±•é­”æ³•", date: "2023å¹´9æœˆ10æ—¥", file: "note3.md" },
                { id: 4, title: "å­¦é™¢å›¾ä¹¦é¦†æ¢é™©", date: "2023å¹´9æœˆ15æ—¥", file: "note4.md" },
                { id: 5, title: "å‘¨æœ«çš„æ£®æ—æ•£æ­¥", date: "2023å¹´9æœˆ20æ—¥", file: "note5.md" }
            ];
            
            // æ¸²æŸ“ç¬”è®°åˆ—è¡¨
            renderNoteList();
        }
        
        // æ¸²æŸ“ç¬”è®°åˆ—è¡¨
        function renderNoteList() {
            chapterList.innerHTML = '';
            
            // æ ¹æ®æ’åºæ–¹å¼å¤„ç†ç¬”è®°åˆ—è¡¨
            const sortedNotes = [...notes].sort((a, b) => {
                return sortOrder === 'asc' ? a.id - b.id : b.id - a.id;
            });
            
            // åˆ›å»ºç¬”è®°åˆ—è¡¨é¡¹
            sortedNotes.forEach((note, index) => {
                const noteItem = document.createElement('div');
                noteItem.className = `chapter-item p-3 rounded-xl cursor-pointer ${currentNoteIndex === note.id - 1 ? 'active' : ''}`;
                noteItem.innerHTML = `
                    <div class="font-medium">${note.title}</div>
                    <div class="text-xs text-gray-500 mt-1">${note.date}</div>
                `;
                
                // ç‚¹å‡»ç¬”è®°é¡¹åŠ è½½å¯¹åº”ç¬”è®°
                noteItem.addEventListener('click', () => {
                    loadNote(note.id - 1);
                    chapterSidebar.classList.remove('active');
                });
                
                chapterList.appendChild(noteItem);
            });
        }
        
        // åŠ è½½ç¬”è®°å†…å®¹
        function loadNote(index) {
            if (index < 0 || index >= notes.length) return;
            
            // æ›´æ–°å½“å‰ç¬”è®°ç´¢å¼•
            currentNoteIndex = index;
            
            // æ›´æ–°ç¬”è®°æ ‡é¢˜å’Œæ—¥æœŸ
            chapterTitle.textContent = notes[index].title;
            noteDate.textContent = notes[index].date;
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            readingArea.innerHTML = `
                <div class="flex justify-center items-center h-64">
                    <i class="fa fa-spinner fa-spin text-secondary"></i>
                    <span class="ml-2">åŠ è½½ä¸­...</span>
                </div>
            `;
            
            // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥é€šè¿‡AJAXè¯·æ±‚åŠ è½½å¯¹åº”çš„.mdæ–‡ä»¶å†…å®¹
            // è¿™é‡Œä½¿ç”¨æ¨¡æ‹Ÿå†…å®¹
            setTimeout(() => {
                // ä¸åŒç¬”è®°çš„æ¨¡æ‹Ÿå†…å®¹
                let mockContent = '';
                
                if (index === 0) {
                    mockContent = `
# é­”æ³•å­¦é™¢çš„ç¬¬ä¸€å¤©

ä»Šå¤©æ˜¯æˆ‘æ¥åˆ°èŒ—æ²é­”æ³•å­¦é™¢çš„ç¬¬ä¸€å¤©ï¼Œå¿ƒæƒ…æ—¢ç´§å¼ åˆå…´å¥‹ï¼ğŸ¾

å­¦é™¢æ¯”æˆ‘æƒ³è±¡çš„è¿˜è¦å¤§ï¼Œå¤è€çš„åŸå ¡å¼å»ºç­‘è¢«èŒ‚å¯†çš„æ£®æ—ç¯ç»•ï¼Œç©ºæ°”ä¸­éƒ½å¼¥æ¼«ç€å¥‡å¦™çš„æ°”æ¯ã€‚

## æŠ¥åˆ°è¿‡ç¨‹

æ—©ä¸Š9ç‚¹ï¼Œæˆ‘å‡†æ—¶æ¥åˆ°äº†å­¦é™¢çš„ä¸»å¡”æ¥¼æŠ¥åˆ°ã€‚è´Ÿè´£æ¥å¾…çš„çŒ«å¤´é¹°æ•™æˆéå¸¸å’Œè”¼ï¼Œç»™äº†æˆ‘ä¸€æœ¬åšåšçš„æ ¡è§„å’Œä¸€å¼ æ ¡å›­åœ°å›¾ã€‚

> "è®°ä½ï¼Œåœ¨èŒ—æ²å­¦é™¢ï¼Œå¥½å¥‡å¿ƒæ˜¯æœ€å®è´µçš„å“è´¨ï¼Œä½†ä¹Ÿè¦æ‡‚å¾—æ•¬ç•é­”æ³•ã€‚" â€”â€” çŒ«å¤´é¹°æ•™æˆ

## æˆ‘çš„å®¿èˆ

æˆ‘è¢«åˆ†é…åˆ°äº†æ©¡æœ¨å®¿èˆï¼Œå®¤å‹æ˜¯ä¸€åªå«å¯å¯çš„å°æ¾é¼ ï¼Œå¥¹çœ‹èµ·æ¥å¾ˆå‹å–„ã€‚å®¿èˆè™½ç„¶ä¸å¤§ï¼Œä½†å¸ƒç½®å¾—å¾ˆæ¸©é¦¨ï¼Œè¿˜æœ‰ä¸€ä¸ªå¯ä»¥çœ‹åˆ°æ£®æ—çš„å°çª—æˆ·ã€‚

### ä»Šæ—¥å°è®°

- è®¤è¯†äº†3ä½æ–°åŒå­¦
- é¢†åˆ°äº†ç¬¬ä¸€æœ¬é­”æ³•ä¹¦ã€ŠåŸºç¡€å…ƒç´ æ“æ§ã€‹
- ä¸å°å¿ƒå·®ç‚¹æŠŠä¼‘æ¯å®¤çš„ç›†æ ½å˜æˆäº†å…”å­ï¼ˆè¿˜å¥½åŠæ—¶åˆ¶æ­¢äº†ï¼‰

æ˜å¤©å°±è¦å¼€å§‹æ­£å¼ä¸Šè¯¾äº†ï¼Œå¸Œæœ›èƒ½æœ‰å¥½çš„è¡¨ç°ï¼
                `;
                } else if (index === 1) {
                    mockContent = `
# è®¤è¯†äº†æ–°çš„æœ‹å‹

ä»Šå¤©åœ¨è‰è¯è¯¾ä¸Šè®¤è¯†äº†å‡ ä½æ–°æœ‹å‹ï¼ŒçœŸæ˜¯å¼€å¿ƒçš„ä¸€å¤©ï¼ğŸ˜Š

## è‰è¯è¯¾çš„å¥‡é‡

è‰è¯è¯¾åœ¨æ¸©å®¤é‡Œè¿›è¡Œï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•è¾¨è¯†å’Œé‡‡é›†é­”æ³•æ¤ç‰©ã€‚æˆ‘å› ä¸ºå¤ªä¸“æ³¨äºè§‚å¯Ÿä¸€æ ªå‘å…‰çš„è˜‘è‡ï¼Œä¸å°å¿ƒè¸©åˆ°äº†è—¤è”“ï¼Œå·®ç‚¹æ‘”å€’ã€‚

å¹¸å¥½ä¸€åªå«ç°ç°çš„å°ç‹¼åŠæ—¶æ‰¶ä½äº†æˆ‘ã€‚

> "å°å¿ƒç‚¹ï¼Œè¿™ç§è—¤è”“ä¼šç¼ ä½ç§»åŠ¨çš„ä¸œè¥¿å“¦ã€‚" â€”â€” ç°ç°

## åˆé¤æ—¶å…‰

è¯¾åï¼Œç°ç°å¸¦æˆ‘è®¤è¯†äº†ä»–çš„æœ‹å‹ï¼šä¸€åªå«é“ƒé“ƒçš„å°é¹¿å’Œä¸€åªå«è·³è·³çš„å…”å­ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å­¦é™¢çš„èŠ±å›­é‡Œåƒäº†åˆé¤ã€‚

é“ƒé“ƒå¸¦æ¥äº†å¥¹å¦ˆå¦ˆåšçš„åšæœé¥¼å¹²ï¼Œéå¸¸ç¾å‘³ï¼è·³è·³åˆ™åˆ†äº«äº†ä»–æ”¶é›†çš„å„ç§æœ‰è¶£çš„çŸ³å¤´ã€‚

### ä»Šæ—¥å°è®°

- è®¤è¯†äº†ç°ç°ã€é“ƒé“ƒå’Œè·³è·³
- å­¦ä¼šäº†è¾¨è¯†3ç§é­”æ³•æ¤ç‰©
- è¢«æ¸©å®¤é‡Œçš„å«ç¾è‰"å’¬"äº†ä¸€å£ï¼ˆæœ‰ç‚¹ç—’ï¼‰

æ˜å¤©æˆ‘ä»¬çº¦å¥½ä¸€èµ·å»å›¾ä¹¦é¦†è‡ªä¹ ï¼ŒæœŸå¾…ï¼
                `;
                } else {
                    // å…¶ä»–ç¬”è®°çš„é€šç”¨æ¨¡æ¿
                    mockContent = `
# ${notes[index].title}

ä»Šå¤©å‘ç”Ÿäº†å¾ˆå¤šæœ‰è¶£çš„äº‹æƒ…ï¼Œæˆ‘æƒ³æŠŠå®ƒä»¬è®°å½•ä¸‹æ¥ã€‚

è¿™æ˜¯æˆ‘åœ¨èŒ—æ²é­”æ³•å­¦é™¢çš„ç¬¬${index * 5}å¤©ï¼Œå·²ç»æ…¢æ…¢é€‚åº”äº†è¿™é‡Œçš„ç”Ÿæ´»ã€‚

<div class="note-card">
<strong>ä»Šæ—¥æ„Ÿæ‚Ÿï¼š</strong>
é­”æ³•ä¸ä»…ä»…æ˜¯å’’è¯­å’Œé­”æ–ï¼Œæ›´é‡è¦çš„æ˜¯å†…å¿ƒçš„å¹³é™å’Œå–„è‰¯ã€‚
</div>

## æ—¥å¸¸ç‚¹æ»´

ä»Šå¤©çš„è¯¾ç¨‹å¾ˆæœ‰è¶£ï¼Œæˆ‘å­¦åˆ°äº†å¾ˆå¤šæ–°çŸ¥è¯†ã€‚ä¸‹åˆå’Œæœ‹å‹ä»¬ä¸€èµ·åœ¨æ ¡å›­é‡Œæ•£æ­¥ï¼ŒèŠäº†å¾ˆå¤šå…³äºæœªæ¥çš„æ¢¦æƒ³ã€‚

### ä»Šæ—¥å°è®°

- å®Œæˆäº†è€å¸ˆå¸ƒç½®çš„ä½œä¸š
- å’Œæœ‹å‹ä»¬åˆ†äº«äº†é›¶é£Ÿ
- å‚æ™šçœ‹åˆ°äº†ç¾ä¸½çš„æ™šéœ

æœŸå¾…æ˜å¤©çš„åˆ°æ¥ï¼
                `;
                }
                
                // ä½¿ç”¨markedåº“å°†Markdownè½¬æ¢ä¸ºHTML
                readingArea.innerHTML = marked.parse(mockContent);
                
                // æ›´æ–°ç¬”è®°åˆ—è¡¨é€‰ä¸­çŠ¶æ€
                renderNoteList();
                
                // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
                updateNavButtons();
                
                // æ»šåŠ¨åˆ°é¡¶éƒ¨
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 800);
        }
        
        // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
        function updateNavButtons() {
            // ä¸Šä¸€ç¯‡æŒ‰é’®
            if (currentNoteIndex <= 0) {
                prevChapter.disabled = true;
                prevChapterBottom.disabled = true;
            } else {
                prevChapter.disabled = false;
                prevChapterBottom.disabled = false;
            }
            
            // ä¸‹ä¸€ç¯‡æŒ‰é’®
            if (currentNoteIndex >= notes.length - 1) {
                nextChapter.disabled = true;
                nextChapterBottom.disabled = true;
            } else {
                nextChapter.disabled = false;
                nextChapterBottom.disabled = false;
            }
        }
        
        // ç»‘å®šäº‹ä»¶ç›‘å¬
        function bindEvents() {
            // ä¾§è¾¹æ åˆ‡æ¢
            sidebarToggle.addEventListener('click', () => {
                mainSidebar.classList.toggle('-translate-x-full');
                overlay.classList.toggle('hidden');
            });
            
            // ç‚¹å‡»é®ç½©å±‚å…³é—­ä¾§è¾¹æ 
            overlay.addEventListener('click', () => {
                mainSidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
            });
            
            // ç¬”è®°ä¾§è¾¹æ åˆ‡æ¢
            chapterToggle.addEventListener('click', () => {
                chapterSidebar.classList.add('active');
            });
            
            chapterToggleBottom.addEventListener('click', () => {
                chapterSidebar.classList.add('active');
            });
            
            closeChapter.addEventListener('click', () => {
                chapterSidebar.classList.remove('active');
            });
            
            // ç‚¹å‡»é˜…è¯»åŒºåŸŸä¸­é—´ä½ç½®æ‰“å¼€ç¬”è®°åˆ—è¡¨
            readingArea.addEventListener('click', (e) => {
                // æ£€æŸ¥ç‚¹å‡»ä½ç½®æ˜¯å¦åœ¨é˜…è¯»åŒºåŸŸä¸­é—´
                const rect = readingArea.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const clickX = e.clientX;
                const clickY = e.clientY;
                
                // å¦‚æœç‚¹å‡»ä½ç½®åœ¨ä¸­å¿ƒåŒºåŸŸï¼ˆ100pxèŒƒå›´å†…ï¼‰
                if (Math.abs(clickX - centerX) < 100 && Math.abs(clickY - centerY) < 100) {
                    chapterSidebar.classList.toggle('active');
                }
            });
            
            // ç¬”è®°å¯¼èˆª
            prevChapter.addEventListener('click', () => {
                if (currentNoteIndex > 0) {
                    loadNote(currentNoteIndex - 1);
                }
            });
            
            nextChapter.addEventListener('click', () => {
                if (currentNoteIndex < notes.length - 1) {
                    loadNote(currentNoteIndex + 1);
                }
            });
            
            prevChapterBottom.addEventListener('click', () => {
                if (currentNoteIndex > 0) {
                    loadNote(currentNoteIndex - 1);
                }
            });
            
            nextChapterBottom.addEventListener('click', () => {
                if (currentNoteIndex < notes.length - 1) {
                    loadNote(currentNoteIndex + 1);
                }
            });
            
            // æ’åºæ–¹å¼åˆ‡æ¢
            orderAsc.addEventListener('click', () => {
                sortOrder = 'asc';
                orderAsc.classList.add('text-secondary');
                orderAsc.classList.remove('text-dark');
                orderDesc.classList.add('text-dark');
                orderDesc.classList.remove('text-secondary');
                renderNoteList();
            });
            
            orderDesc.addEventListener('click', () => {
                sortOrder = 'desc';
                orderDesc.classList.add('text-secondary');
                orderDesc.classList.remove('text-dark');
                orderAsc.classList.add('text-dark');
                orderAsc.classList.remove('text-secondary');
                renderNoteList();
            });
            
            // å­—ä½“å¤§å°è°ƒèŠ‚
            fontSmaller.addEventListener('click', () => {
                if (fontSize > 70) {
                    fontSize -= 10;
                    updateFontSize();
                    saveSettings();
                }
            });
            
            fontLarger.addEventListener('click', () => {
                if (fontSize < 150) {
                    fontSize += 10;
                    updateFontSize();
                    saveSettings();
                }
            });
            
            // ä¸»é¢˜åˆ‡æ¢
            themeDay.addEventListener('click', () => {
                setTheme('day');
                saveSettings();
            });
            
            themeEye.addEventListener('click', () => {
                setTheme('eye');
                saveSettings();
            });
            
            themeNight.addEventListener('click', () => {
                setTheme('night');
                saveSettings();
            });
        }
        
        // æ›´æ–°å­—ä½“å¤§å°
        function updateFontSize() {
            readingArea.style.fontSize = `${fontSize}%`;
        }
        
        // è®¾ç½®ä¸»é¢˜
        function setTheme(theme) {
            // ç§»é™¤æ‰€æœ‰ä¸»é¢˜ç±»
            document.body.classList.remove('bg-day-bg', 'text-day-text');
            document.body.classList.remove('bg-eye-bg', 'text-eye-text');
            document.body.classList.remove('bg-night-bg', 'text-night-text');
            
            // æ·»åŠ å½“å‰ä¸»é¢˜ç±»
            document.body.classList.add(`bg-${theme}-bg`, `text-${theme}-text`);
            
            // æ›´æ–°æŒ‰é’®æ ·å¼
            themeDay.classList.remove('bg-day-bg', 'text-day-text');
            themeEye.classList.remove('bg-eye-bg', 'text-eye-text');
            themeNight.classList.remove('bg-night-bg', 'text-night-text');
            
            if (theme === 'day') {
                themeDay.classList.add('bg-day-bg', 'text-day-text');
            } else if (theme === 'eye') {
                themeEye.classList.add('bg-eye-bg', 'text-eye-text');
            } else if (theme === 'night') {
                themeNight.classList.add('bg-night-bg', 'text-night-text');
            }
        }
        
        // ä¿å­˜è®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨
        function saveSettings() {
            const settings = {
                theme: document.body.classList.contains('bg-day-bg') ? 'day' : 
                       document.body.classList.contains('bg-eye-bg') ? 'eye' : 'night',
                fontSize: fontSize,
                sortOrder: sortOrder
            };
            
            localStorage.setItem('noteSettings', JSON.stringify(settings));
        }
        
        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è®¾ç½®
        function loadSettings() {
            const savedSettings = localStorage.getItem('noteSettings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                
                // åº”ç”¨ä¸»é¢˜è®¾ç½®
                setTheme(settings.theme);
                
                // åº”ç”¨å­—ä½“å¤§å°è®¾ç½®
                fontSize = settings.fontSize;
                updateFontSize();
                
                // åº”ç”¨æ’åºè®¾ç½®
                sortOrder = settings.sortOrder;
                if (sortOrder === 'asc') {
                    orderAsc.classList.add('text-secondary');
                    orderAsc.classList.remove('text-dark');
                    orderDesc.classList.add('text-dark');
                    orderDesc.classList.remove('text-secondary');
                } else {
                    orderDesc.classList.add('text-secondary');
                    orderDesc.classList.remove('text-dark');
                    orderAsc.classList.add('text-dark');
                    orderAsc.classList.remove('text-secondary');
                }
            }
        }
    </script>
</body>
</html>
